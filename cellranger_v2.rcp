Bootstrap: localimage
From: /data/hyang/singularity_pipelines/singularity_cellranger/cellranger.sif

%labels
    Maintainer Hang(Dylan) Yang
    Image_Name cellRanger_v2
    Image_Version cellRanger_v2

%environment
  export PATH=$PATH:/usr/local/bin

%post
  export DEBIAN_FRONTEND=noninteractive
  apt-get update
  apt-get install -y rpm2cpio
  wget -O bcl2fastq_installer.zip "https://files.softwaredownloads.illumina.com/e8ed3335-5201-48ff-a2bc-db4bfb792c85/bcl2fastq2-v2-20-0-linux-x86-64.zip?Expires=1589505264&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9maWxlcy5zb2Z0d2FyZWRvd25sb2Fkcy5pbGx1bWluYS5jb20vZThlZDMzMzUtNTIwMS00OGZmLWEyYmMtZGI0YmZiNzkyYzg1L2JjbDJmYXN0cTItdjItMjAtMC1saW51eC14ODYtNjQuemlwIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNTg5NTA1MjY0fX19XX0_&Signature=OM0tVf9b6k9q-LkZCKSudFHmemR0tx3nrAfFV0TZCmFJfJgX69~htw16ME6vyjxts9yd9SGCCCWWQ2dYDzg1E4bSsr-ZeJMBC93jIHj2eA~zMCqKYXGcpwvpRbH~vNGHLnTtM-eOwKALp~IlvzMEykppAxXxQ2dhmXXl0tjdHyG3HhYlL1Ri1xJZKsG9NSO2uHl8ILHwxgOLtFFcpVp9Opduk40XzekSCsa8YpLcKitwXCLwdY2TcSiiAW3J-2QsoD6RCjG4ndsh7fmYyoEaHnJcHebdTl69LlCw6WdGY8weH7-rqh1~4SgwTbTyS3Teb1SExXhwfdsdvBQHuK1qjA__&Key-Pair-Id=APKAJO3UYWPXK4A26FPQ"
  unzip bcl2fastq_installer.zip
  rpm2cpio ./bcl2fastq2-v2.20.0.422-Linux-x86_64.rpm | cpio -idmv
  rm bcl2fastq_installer.zip
